<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sight Reader Kids</title>
  </head>
  <body>
    <div class="app">
      <header class="hero hidden">
        <div class="controls">
          <div class="flow-step clef-step active" role="group" aria-label="Choose clef">
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a clef:</div>
            <div class="clef-toggle">
              <button id="clef-treble" class="clef-btn active" aria-pressed="true">ùÑû</button>
              <button id="clef-bass" class="clef-btn" aria-pressed="false">ùÑ¢</button>
            </div>
          </div>
          <div class="flow-step signature-toggle key-step" role="group" aria-label="Choose key signature">
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a key signature:</div>
            <div class="signature-buttons">
              <button id="sig-natural" class="sig-btn active" aria-pressed="true">
                <span class="sig-icon sig-natural">‚ôÆ</span>
              </button>
              <button id="sig-sharp" class="sig-btn" aria-pressed="false">
                <span class="sig-stack sharp">
                  <span class="sig-mark" style="--x: 0px; --y: -0.25em">‚ôØ</span>
                </span>
              </button>
              <button id="sig-flat" class="sig-btn" aria-pressed="false">
                <span class="sig-stack flat">
                  <span class="sig-mark" style="--x: 0px; --y: -0.1em">‚ô≠</span>
                </span>
              </button>
              <button id="sig-sharp-2" class="sig-btn" aria-pressed="false">
                <span class="sig-stack sharp">
                  <span class="sig-mark" style="--x: 0px; --y: -0.25em">‚ôØ</span>
                  <span class="sig-mark" style="--x: 0.45em; --y: 0.1em">‚ôØ</span>
                </span>
              </button>
              <button id="sig-flat-2" class="sig-btn" aria-pressed="false">
                <span class="sig-stack flat">
                  <span class="sig-mark" style="--x: 0px; --y: -0.1em">‚ô≠</span>
                  <span class="sig-mark" style="--x: 0.45em; --y: -0.45em">‚ô≠</span>
                </span>
              </button>
            </div>
          </div>
          <div class="flow-step level-toggle level-step" role="group" aria-label="Choose level">
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a level:</div>
            <div class="level-buttons">
              <button id="level-1" class="sig-btn active" aria-pressed="true">Level 1</button>
              <button id="level-2" class="sig-btn" aria-pressed="false">Level 2</button>
              <button id="level-3" class="sig-btn" aria-pressed="false">Level 3</button>
            </div>
          </div>
          <div class="status" id="status">Microphone off</div>
          <button id="mic-fallback" class="primary hidden">ENABLE MICROPHONE</button>
        </div>
      </header>

      <main class="stage hidden">
        <canvas id="staff" width="900" height="420" aria-label="Music staff"></canvas>
        <div class="celebration" id="celebration" aria-live="polite"></div>
        <audio id="milestone-sound" preload="auto">
          <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQgAAAAA" type="audio/wav" />
        </audio>
      </main>

      <footer class="session-bar hidden" id="session-bar">
        <div class="progress-wrap">
          <div class="progress-label" id="progress-label">0 / 10</div>
          <div class="progress-track">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
        </div>
        <button id="restart-flow" class="ghost">Start again</button>
      </footer>

    </div>

    <div class="milestone-overlay" id="milestone" aria-live="polite">
      <canvas id="confetti-canvas" aria-hidden="true"></canvas>
      <div class="milestone-content">
        <div class="milestone-monkey">
          <img src="/assets/monkey-celebrate.png" alt="Celebration monkey" />
        </div>
        <div class="milestone-text">Fantastic!</div>
      </div>
    </div>

      <div class="warning-overlay" id="warning" aria-live="polite">
      <div class="warning-content">
        <img src="/assets/monkey-ears.png" alt="Monkey covering ears" />
      </div>
    </div>

    <div class="end-overlay" id="end-screen" aria-live="polite">
      <div class="end-content">
        <div class="end-title">Great job!</div>
        <div class="end-actions">
          <button id="redo-session" class="primary">Redo same</button>
          <button id="restart-flow-modal" class="ghost">Start again</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
