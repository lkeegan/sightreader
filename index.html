<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#f6c343" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Sebi's Sight-Reader" />
    <meta name="mobile-web-app-capable" content="yes" />
    <title>Sebi's Sight-Reader</title>
    <link rel="preload" href="fonts/NotoMusic-Regular.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="apple-touch-icon" href="icons/icon-180.png" />
    <link rel="apple-touch-startup-image" href="splash/splash-2048x2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2732x2048.jpg" media="(device-width: 1366px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1668x2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2388x1668.jpg" media="(device-width: 1194px) and (device-height: 834px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1640x2360.jpg" media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2360x1640.jpg" media="(device-width: 1180px) and (device-height: 820px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1536x2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2048x1536.jpg" media="(device-width: 1024px) and (device-height: 768px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1290x2796.jpg" media="(device-width: 645px) and (device-height: 1398px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2796x1290.jpg" media="(device-width: 1398px) and (device-height: 645px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1179x2556.jpg" media="(device-width: 589px) and (device-height: 1278px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2556x1179.jpg" media="(device-width: 1278px) and (device-height: 589px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1284x2778.jpg" media="(device-width: 642px) and (device-height: 1389px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2778x1284.jpg" media="(device-width: 1389px) and (device-height: 642px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1170x2532.jpg" media="(device-width: 585px) and (device-height: 1266px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2532x1170.jpg" media="(device-width: 1266px) and (device-height: 585px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1125x2436.jpg" media="(device-width: 562px) and (device-height: 1218px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2436x1125.jpg" media="(device-width: 1218px) and (device-height: 562px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1242x2688.jpg" media="(device-width: 621px) and (device-height: 1344px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-2688x1242.jpg" media="(device-width: 1344px) and (device-height: 621px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-828x1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1792x828.jpg" media="(device-width: 896px) and (device-height: 414px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-750x1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1334x750.jpg" media="(device-width: 667px) and (device-height: 375px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-640x1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1136x640.jpg" media="(device-width: 568px) and (device-height: 320px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1290x2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1179x2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1284x2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1170x2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1125x2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
    <link rel="apple-touch-startup-image" href="splash/splash-1242x2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" />
  </head>
  <body>
    <div class="app">
      <header class="hero" id="flow-header">
        <div class="controls">
          <div class="flow-step clef-step active" role="group" aria-label="Choose clef">
            <div class="app-title">Sebi's Sight-Reader</div>
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a clef:</div>
            <div class="clef-toggle">
              <button id="clef-treble" class="clef-btn active" aria-pressed="true">ùÑû</button>
              <button id="clef-bass" class="clef-btn" aria-pressed="false">ùÑ¢</button>
            </div>
          </div>
          <div class="flow-step signature-toggle key-step" role="group" aria-label="Choose key signature">
            <div class="app-title">Sebi's Sight-Reader</div>
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a key signature:</div>
            <div class="signature-buttons">
              <button id="sig-natural" class="sig-btn active" aria-pressed="true">
                <span class="sig-icon sig-natural">‚ôÆ</span>
              </button>
              <button id="sig-sharp" class="sig-btn" aria-pressed="false">
                <span class="sig-stack sharp">
                  <span class="sig-mark" style="--x: 0px; --y: -0.25em">‚ôØ</span>
                </span>
              </button>
              <button id="sig-flat" class="sig-btn" aria-pressed="false">
                <span class="sig-stack flat">
                  <span class="sig-mark" style="--x: 0px; --y: -0.1em">‚ô≠</span>
                </span>
              </button>
              <button id="sig-sharp-2" class="sig-btn" aria-pressed="false">
                <span class="sig-stack sharp">
                  <span class="sig-mark" style="--x: 0px; --y: -0.25em">‚ôØ</span>
                  <span class="sig-mark" style="--x: 0.45em; --y: 0.1em">‚ôØ</span>
                </span>
              </button>
              <button id="sig-flat-2" class="sig-btn" aria-pressed="false">
                <span class="sig-stack flat">
                  <span class="sig-mark" style="--x: 0px; --y: -0.1em">‚ô≠</span>
                  <span class="sig-mark" style="--x: 0.45em; --y: -0.45em">‚ô≠</span>
                </span>
              </button>
            </div>
          </div>
          <div class="flow-step level-toggle level-step" role="group" aria-label="Choose level">
            <div class="app-title">Sebi's Sight-Reader</div>
            <img class="flow-image" src="/assets/monkey-piano.jpg" alt="Monkey at a piano" />
            <div class="flow-title">Choose a level:</div>
            <div class="level-buttons">
              <button id="level-1" class="sig-btn active" aria-pressed="true">Level 1</button>
              <button id="level-2" class="sig-btn" aria-pressed="false">Level 2</button>
              <button id="level-3" class="sig-btn" aria-pressed="false">Level 3</button>
            </div>
          </div>
          <div class="status" id="status">Microphone off</div>
          <button id="mic-fallback" class="primary hidden">ENABLE MICROPHONE</button>
        </div>
      </header>

      <main class="stage hidden">
        <canvas id="staff" width="900" height="420" aria-label="Music staff"></canvas>
        <div class="celebration" id="celebration" aria-live="polite"></div>
      </main>

      <footer class="session-bar hidden" id="session-bar">
        <div class="progress-wrap">
          <div class="progress-label" id="progress-label">0 / 10</div>
          <div class="progress-track">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
        </div>
        <button id="restart-flow" class="ghost">Start again</button>
      </footer>

    </div>

    <div class="end-overlay" id="end-screen" aria-live="polite">
      <canvas id="confetti-canvas" aria-hidden="true"></canvas>
      <div class="end-content">
        <div class="end-actions">
          <div class="end-monkey">
            <img src="/assets/monkey-celebrate.jpg" alt="Happy monkey" />
          </div>
          <div class="end-text">Well done!</div>
          <button id="redo-session" class="primary">Play again</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
